!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d2321d1f-2eb6-4024-a2d2-6a549789506d",e._sentryDebugIdIdentifier="sentry-dbid-d2321d1f-2eb6-4024-a2d2-6a549789506d")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9066],{1557:function(e,t,n){n.d(t,{U:function(){return r}});let r=(0,n(52983).createContext)({})},35117:function(e,t,n){n.d(t,{u:function(){return N}});var r=n(97458),a=n(52983),o=n(23113),l=n(90312),s=n(91394),c=n(25288),u=n(17842),i=n(7616),d=n(45451);let f=()=>(0,a.useCallback)(e=>{let{collectionId:t,collectionName:n,fileId:r,location:a}=e;(0,d.sendGTMEvent)({collection_id:t,collection_name:n,event_name:"add_to_collection",event:"ga4event",file_id:r,location:a})},[]),m=()=>(0,a.useCallback)(e=>{let{location:t,fileId:n}=e;(0,d.sendGTMEvent)({event:"ga4event",event_name:"collect",location:t,file_id:n})},[]);var h=n(49504),v=n(32951),w=n(57577),p=n(94498),y=n(2983),g=n(58058),_=n.n(g),b=n(10893);let C=()=>{let{t:e}=(0,b.$G)("detailCommon");return(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 px-4 py-2 text-sm text-surface-foreground-1",children:[(0,r.jsx)("span",{className:"whitespace-nowrap text-sm font-semibold text-surface-foreground-1",children:e("savedSuccessfully")}),(0,r.jsx)(_(),{href:"/user/collections",legacyBehavior:!0,children:(0,r.jsx)("span",{className:"cursor-pointer whitespace-nowrap text-xs font-normal !text-surface-foreground-accent-0",children:e("seeMyCollections")})})]})},x=e=>{let{type:t,id:n,location:d}=e,[g,_]=(0,a.useState)(null),b=(0,a.useRef)(!1),[x,E]=(0,a.useState)(!1),[R,N]=(0,a.useState)(null),k=(0,i.b9)(p.mX),I=f(),T=m(),O=(0,o.a)("smMax"),j=(0,s.d)(),D=(0,c.NL)(),S=(0,h.gx)(),{signUpUrl:P,setLoginCookies:M}=(0,l.e)(),{openToast:L}=(0,u.x_)(),U=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!b.current||e)try{e?S():k(!0);let t=await D.fetchQuery((0,h.us)({page:1,resourceId:n}));N(t),b.current=!0}catch(e){console.error("Error fetching collections when opening the popover:",e)}finally{e||k(!1)}},[D,n,k,S]),z=async()=>{if(!j){M(),window.location.href=P;return}(0,y.B)(t,"add_to_collection"),await U(),E(!0),T({location:d,fileId:n})},A=e=>_(t=>[...null!=t?t:[],e]),G=e=>_(t=>{var n;return null!==(n=null==t?void 0:t.filter(t=>t!==e))&&void 0!==n?n:[]}),H=(0,a.useCallback)(async(e,a)=>{try{A(e),await (0,w.R)({id:n,collectionId:e,resourceType:t}),I({fileId:n,collectionId:e,collectionName:a,location:d}),L({message:(0,r.jsx)(C,{}),showIcon:!1,showCloseButton:!1,position:O?"bottom-center":"top-right"}),await U(!0)}catch(e){console.error(e),L()}finally{G(e),O&&E(!1)}},[n,t,I,d,L,O,U]);return{responseCollections:R,collectionIdsLoading:g,isOpen:x,setIsOpen:E,onButtonOpenClick:z,handleAddToCollection:H,handleRemoveFromCollection:(0,a.useCallback)(async e=>{try{A(e),await (0,v.N)({id:n,collectionId:e,resourceType:t}),await U(!0)}catch(e){console.error(e),L()}finally{G(e)}},[n,L,t,U]),handleOpenChange:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E(e)}}};var E=n(8095),R=n(1557);let N=e=>{let{children:t,id:n,type:o,location:l}=e,{responseCollections:s,collectionIdsLoading:c,isOpen:u,setIsOpen:i,onButtonOpenClick:d,handleOpenChange:f,handleAddToCollection:m,handleRemoveFromCollection:h}=x({type:o,id:n,location:l}),{searchCollections:v,isSearchByApi:w,handleSearch:p}=(0,E.j)(),y=(0,a.useMemo)(()=>({id:n,type:o,searchCollections:v,responseCollections:s,collectionIdsLoading:c,isSearchByApi:w,isOpen:u,setIsOpen:i,handleSearch:p,handleAddToCollection:m,handleRemoveFromCollection:h,onButtonOpenClick:d,handleOpenChange:f}),[n,o,v,s,c,w,u,d,i,m,h,p,f]);return(0,r.jsx)(R.U.Provider,{value:y,children:t})}},88659:function(e,t,n){n.d(t,{r:function(){return o}});var r=n(52983),a=n(1557);let o=()=>(0,r.useContext)(a.U)},8095:function(e,t,n){n.d(t,{j:function(){return c}});var r=n(7616),a=n(52983),o=n(94498),l=n(99);let s=()=>{let{data:e,meta:{pagination:{nextPage:t}}}=(0,r.Dv)(o.HQ);return{collections:e,nextPage:t}},c=()=>{let{collections:e,nextPage:t}=s(),[n,c]=(0,a.useState)([]),u=(0,r.b9)(o.GD),i=(0,a.useRef)();(0,a.useEffect)(()=>{(null==e?void 0:e.length)>0&&c(e.map(l.V))},[e,t]);let d=null!==t,f=t=>{c((null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))).map(l.V))},m=async e=>{i.current&&clearTimeout(i.current),i.current=setTimeout(async()=>{u(e)},350)};return{isSearchByApi:d,searchCollections:n,handleSearch:e=>{d?m(e):f(e)}}}},99:function(e,t,n){n.d(t,{V:function(){return r}});let r=e=>{var t,n;return{id:e.id,name:e.name,author:(null===(t=e.author)||void 0===t?void 0:t.name)||void 0,hasResourceInCollection:e.hasResourceInCollection,preview:null===(n=e.previews[0])||void 0===n?void 0:n.url}}},65724:function(e,t,n){n.d(t,{W:function(){return l}});var r=n(49558),a=n(52983),o=n(21455);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"resource_detail_premium",{setShowModal:l,setOrigin:s,setTrackerClick:c,setResourceData:u,setCheckoutQueryParams:i,setModalType:d}=(0,o.u)(),f=(0,a.useMemo)(()=>({category:t,location:n,ACTION:"go_premium",...e&&{resource_id:e}}),[t,n,e]),[m,h]=(0,r.n9)(f);return(0,a.useCallback)(e=>{let{resourceData:t,origin:n,onButtonClick:r=()=>void 0,checkoutQueryParams:a,modalType:o="premiumContent"}=e;s(n),c(()=>h),u(t),i(a),d(o),m(),r(),l(!0)},[s,c,u,i,d,m,l,h])}},40308:function(e,t,n){n.d(t,{_:function(){return i}});var r=n(97458),a=n(23113),o=n(53344),l=n.n(o),s=n(35117),c=n(88659);let u=l()(()=>Promise.all([n.e(8454),n.e(7301),n.e(8569)]).then(n.bind(n,44991)).then(e=>e.DetailAddToCollectionModal),{loadableGenerated:{webpack:()=>[44991]},ssr:!1}),i=e=>{let{children:t,id:n,type:a,location:o}=e;return(0,r.jsx)(s.u,{id:n,type:a,location:o,children:(0,r.jsx)(d,{children:t})})},d=e=>{let{children:t}=e,{isOpen:n,handleOpenChange:o}=(0,c.r)(),l=(0,a.a)("smMax");return(0,r.jsxs)(r.Fragment,{children:[t,n&&l&&(0,r.jsx)(u,{onOpenChange:o})]})}},72407:function(e,t,n){n.d(t,{r:function(){return o}});var r=n(52983),a=n(33956);let o=()=>{let e=(0,r.useContext)(a.T);if(void 0===e)throw Error("useIsOpenDetailPostDownload must be used within a DetailPostDownloadContext");return e}},80719:function(e,t,n){n.d(t,{X:function(){return a}});var r=n(63202);let a=e=>{let{page:t,resourceId:n,searchTerm:a,collectionIds:o,ownership:l}=e,s=o?o.join(","):void 0,c={page:"".concat(t),...n&&{resourceId:"".concat(n)},...a&&{"filter[term]":a},...s&&{"filter[ids]":s},...l&&{"filter[ownership]":l}},u="/api/user/collections?".concat(new URLSearchParams(c));return(0,r.c)(u,"GET")}},49504:function(e,t,n){n.d(t,{gx:function(){return m},lL:function(){return f},us:function(){return d}});var r=n(59077),a=n(78511),o=n(25288),l=n(7616),s=n(52983),c=n(80719),u=n(94498);let i=["collections","all"],d=e=>{let{page:t,searchTerm:n,resourceId:a}=e;return(0,r.C)({queryKey:[...i,{page:t,resourceId:a,searchTerm:n}],queryFn:async()=>{let{data:e,success:r}=await (0,c.X)({page:t,resourceId:a,searchTerm:n});if(!r)throw Error(e);return e}})},f=e=>{let{page:t=1,resourceId:n}=e,r=(0,l.Dv)(u.GD);return(0,a.a)(d({page:t,searchTerm:r,resourceId:null!=n?n:null}))},m=()=>{let e=(0,o.NL)();return(0,s.useCallback)(()=>{e.invalidateQueries({queryKey:i})},[e])}},32951:function(e,t,n){n.d(t,{N:function(){return a}});var r=n(63202);let a=async e=>{let{id:t,collectionId:n,resourceType:a}=e,o=new URLSearchParams;return o.append("collectionId",n.toString()),o.set("resourceType",a),await (0,r.c)("/api/user/resources/".concat(t,"/collections?").concat(o.toString()),"DELETE")}},57577:function(e,t,n){n.d(t,{R:function(){return a}});var r=n(63202);let a=async e=>{let{id:t,collectionId:n,resourceType:a}=e;return await (0,r.c)("/api/user/resources/".concat(t,"/collections"),"POST",{collectionId:n,resourceType:a})}},94498:function(e,t,n){n.d(t,{GD:function(){return a},HQ:function(){return o},mX:function(){return s},w0:function(){return l}});var r=n(24399);let a=(0,n(73139).rw)(null),o=(0,r.cn)({data:[],meta:{pagination:{nextPage:null,perPage:0,prevPage:null,currentPage:0}}}),l=(0,r.cn)([]),s=(0,r.cn)(!1)},21455:function(e,t,n){n.d(t,{u:function(){return o}});var r=n(52983),a=n(26670);let o=()=>{let e=(0,r.useContext)(a.o);if(null===e)throw Error("useModalPricingState must be used within a ModalPricingContext");return e}},33247:function(e,t,n){n.d(t,{R:function(){return i}});var r=n(51780),a=n(52983),o=n(26140);let l={ai:"photo",mockup:"vector",template:"vector"},s={keyword:"tag",collections:"collection",image_search:"search",image_search_similar:"search",user_recommendations_home:"home",popular:"search",recent:"search",family:"author"},c={"/collection":"collection"},u=()=>{let e=(0,o.Q)(),{pathname:t}=(0,r.useRouter)(),n=null==e?void 0:e.fromView;if(n){var a;return null!==(a=s[n])&&void 0!==a?a:n}return c[t]},i=()=>{let e=u();return(0,a.useCallback)(t=>{var n;let{type:r,subtype:a,authorName:o,isPremium:s,isAIGenerated:c,eventName:u,pageType:i,businessLine:d="content",editor:f,tool:m}=t,h=new URLSearchParams;h.set("business_line",d);let v=null!=i?i:e;return v&&h.set("page_type",v),h.set("item_type",null!==(n=l[r])&&void 0!==n?n:r),a&&h.set("item_subtype",a),o&&h.set("item_author",o),f&&h.set("editor",f),m&&h.set("tool",m),h.set("is_premium_item",s.toString()),h.set("is_ai_generated",c.toString()),h.set("event_name",u),h},[e])}},63202:function(e,t,n){n.d(t,{c:function(){return r}});let r=async(e,t,n,r)=>{let a=r?new Headers:void 0;return(null==r?void 0:r.locale)&&a&&a.set("accept-language",r.locale),(null==r?void 0:r.cache)&&a&&a.set("cache",r.cache),fetch(e,{method:t,...n&&{body:JSON.stringify(n)},...r&&{...r,headers:a}}).then(async e=>e.ok?{success:!0,data:204===e.status?null:await e.json()}:400===e.status?{success:!1,data:e.statusText}:401===e.status||405===e.status?{success:!1,data:"AUTHENTICATION_ERROR"}:403===e.status?{success:!1,data:"FORBIDDEN"}:500===e.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:404===e.status?{success:!1,data:"NOT_FOUND"}:429===e.status?{success:!1,data:"TOO_MANY_REQUESTS"}:{success:!1,data:await e.json()})}},11645:function(e,t,n){n.d(t,{u:function(){return o}});var r=n(52983),a=n(8147);let o=()=>{let e=(0,a.H)();return(0,r.useCallback)(t=>{if(!e)return!0;try{let n=e.disabledPermissionsTools;if(!n)return console.error(JSON.stringify({fatal_error:"Error checking tool permission for ".concat(t," from wallet ").concat(e.walletId),error:"Disabled permissions tools not found"})),!0;return!(t in n)}catch(n){return console.error(JSON.stringify({fatal_error:"Error checking tool permission for ".concat(t," from wallet ").concat(e.walletId),error:n})),!0}},[e])}},41937:function(e,t,n){n.d(t,{I:function(){return a}});var r=n(8147);let a=()=>{let e=(0,r.H)();return!e||!!(null==e?void 0:e.profile.isAnonymous)}},43186:function(e,t,n){n.d(t,{J:function(){return u}});var r=n(52983);let a=async e=>{let{walletId:t}=e,n=await fetch(t?"/api/user/downloads/limit?walletId=".concat(t):"/api/user/downloads/limit");return n.ok?{success:!0,data:await n.json()}:401===n.status||403===n.status||405===n.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===n.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}};var o=n(1850);o.z.object({data:o.z.object({filename:o.z.string(),url:o.z.string(),today_downloads:o.z.number(),download_limit:o.z.number()}).transform(e=>{let{download_limit:t,today_downloads:n,...r}=e;return{todayDownloads:n,downloadLimit:t,...r}})}),o.z.object({data:o.z.object({current:o.z.number(),limit:o.z.number()})}).transform(e=>{let{data:t}=e;return t});var l=n(72234),s=n(28380),c=n(6476);let u=()=>{let e=(0,l.Lh)(),t=(0,c.aj)();return(0,r.useCallback)(async()=>{let{success:n,data:r}=await a({walletId:e});if(!n)throw Error("Error fetching user download info");let o={downloads:(null==r?void 0:r.current)||0,limit:(null==r?void 0:r.limit)||0};return t(o),s.f.update({downloads:o.downloads,limit_downloads:o.limit}),o},[t,e])}},85229:function(e,t,n){n.d(t,{l:function(){return l}});var r=n(7616),a=n(72234);let o=(0,n(24399).cn)(!1),l=()=>{let{isUnpaid:e}=(0,a.RI)(),[t,n]=(0,r.KO)(o);return{isUserWinback:e,isOpenWinbackModal:t,showWinbackModal:()=>n(!0),hideWinbackModal:()=>n(!1)}}},11924:function(e,t,n){n.d(t,{N:function(){return u}});var r=n(52983),a=n(91394),o=n(94891),l=n(50833),s=n(65629),c=n(21212);let u=()=>{let e=(0,a.d)(),t=(0,r.useCallback)(async e=>{let t=[...(0,l.zP)(o.yP),e];t.length>=o.p0?(await (0,s.J)(t)).success&&(0,l.dV)(o.yP):(0,l.rl)(o.yP,t)},[]);return{handleLog:(0,r.useCallback)(async n=>{if(!e)return;let r=c.Wv.safeParse(n);r.success&&await t(r.data)},[t,e])}}},59077:function(e,t,n){n.d(t,{C:function(){return r}});function r(e){return e}}}]);